webpackJsonp([8],{"0zrf":function(e,t,a){var n=a("2PNj");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("8bSs")("4c23a8a5",n,!0)},"2PNj":function(e,t,a){t=e.exports=a("BkJT")(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"search-edit.vue",sourceRoot:""}])},"3ZNs":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("h3",[e._v("热门搜索配置")]),e._v(" "),a("div",{staticClass:"line"}),e._v(" "),a("el-button",{staticClass:"add",attrs:{type:"primary",size:"mini"},on:{click:e.searchAdd}},[e._v("新增")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",attrs:{border:"",data:e.search,"element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{label:"序号",prop:"sid",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"搜索类型",prop:"searchType",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("1"==t.row.searchType?"基金":"")+"\n        "+e._s("2"==t.row.searchType?"咨询公告":"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"搜索词条名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("1"==t.row.searchType?t.row.fundname:"")+"\n        "+e._s("2"==t.row.searchType?t.row.searchName:"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"跳转链接",prop:"link",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("1"==t.row.searchType?"跳转基金详情页":"")+"\n        "+e._s("2"==t.row.searchType?t.row.link:"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.searchDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("search-edit",{attrs:{edit:e.editData,visible:e.editVisible},on:{add:e.addSearch,close:e.closeEdit}})],1)},s=[],o={render:n,staticRenderFns:s};t.a=o},EVCB:function(e,t,a){"use strict";function n(e){a("0zrf")}var s=a("X2tE"),o=a("QGuM"),i=a("8AGX"),r=n,l=i(s.a,o.a,!1,r,"data-v-becbefd4",null);t.a=l.exports},JYzL:function(e,t,a){t=e.exports=a("BkJT")(!0),t.push([e.i,".search[data-v-4f8a0f4c]{text-align:left}.search .add[data-v-4f8a0f4c]{padding-left:15px;padding-right:15px}","",{version:3,sources:["C:/Users/kivlin/Desktop/final_exam/evaluation_web/src/pages/main/search.vue"],names:[],mappings:"AACA,yBACE,eAAiB,CAClB,AACD,8BACI,kBAAmB,AACnB,kBAAoB,CACvB",file:"search.vue",sourcesContent:["\n.search[data-v-4f8a0f4c] {\n  text-align: left;\n}\n.search .add[data-v-4f8a0f4c] {\n    padding-left: 15px;\n    padding-right: 15px;\n}\n"],sourceRoot:""}])},QGuM:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"search-edit",attrs:{visible:e.visible,"before-close":e.handleClose,title:"热门搜索配置"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"搜索类型：","label-width":e.formLabelWidth}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.searchType,callback:function(t){e.$set(e.form,"searchType",t)},expression:"form.searchType"}},[e._v("基金")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.form.searchType,callback:function(t){e.$set(e.form,"searchType",t)},expression:"form.searchType"}},[e._v("资讯公告")])],1),e._v(" "),1==e.form.searchType?[a("el-form-item",{attrs:{label:"基金名称：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"搜索基金",size:"small"},on:{change:e.handleSearch},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},on:{click:e.handleSearch},slot:"suffix"})]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","line-height":"24px"},attrs:{"element-loading-text":"拼命加载中",data:e.results,height:"250"}},[a("el-table-column",{attrs:{prop:"fundcode",label:"基金代码",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fundname",label:"基金名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updatetime",label:"更新时间",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.updatetime)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"fundtype",label:"基金类型",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s("2"==t.row.fundtype?"货币型":"")+"\n              "+e._s("3"==t.row.fundtype?"ETF型":"")+"\n              "+e._s("0"==t.row.fundtype?"股票型":"")+"\n              "+e._s("4"==t.row.fundtype?"保本型":"")+"\n              "+e._s("1"==t.row.fundtype?"债券型":"")+"\n              "+e._s("A"==t.row.fundtype?"混合型":"")+"\n              "+e._s("5"==t.row.fundtype?"QDII型":"")+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",disabled:t.row.selected},on:{click:function(a){e.handleSelect(t.row,t.$index)}}},[e._v("添加\n              ")])]}}])})],1)],1)]:e._e(),e._v(" "),2==e.form.searchType?[a("el-form-item",{attrs:{label:"词条名称：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{maxlength:10,size:"small",placeholder:"词条字数不得超过10个","auto-complete":"off"},model:{value:e.form.searchName,callback:function(t){e.$set(e.form,"searchName",t)},expression:"form.searchName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"跳转链接：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{size:"small",placeholder:"请输入跳转链接","auto-complete":"off"},model:{value:e.form.link,callback:function(t){e.$set(e.form,"link",t)},expression:"form.link"}})],1)]:e._e()],2),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},s=[],o={render:n,staticRenderFns:s};t.a=o},Wm9P:function(e,t,a){"use strict";function n(e){a("jcIM")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("x2/H"),o=a("3ZNs"),i=a("8AGX"),r=n,l=i(s.a,o.a,!1,r,"data-v-4f8a0f4c",null);t.default=l.exports},X2tE:function(e,t,a){"use strict";var n=a("aA9S"),s=a.n(n),o=a("I732"),i=a("CjZ7");t.a={name:"",props:{visible:Boolean,edit:Object},watch:{keyword:function(e){this.handleSearch()},edit:function(e){console.log("newVal",e),this.form=s()({},e),this.keyword=this.form.fundname||this.form.fundcode,this.handleSearch(this.keyword)}},data:function(){return{formLabelWidth:"120px",keyword:"",funds:[],timeout:null,form:{},results:[],loading:!1}},mounted:function(){this.updateFunds()},methods:{submit:function(){var e=this;this.checkList()&&a.i(o.b)({title:"立即更新该热门搜索？",confirm_btn:"添加"},function(){console.log("submit",e.edit,e.form),e.$emit("add",e.form)})},checkList:function(){return""==this.form.searchType?(this.$message.error("搜索类型不能为空"),!1):"1"==this.form.searchType&&""==this.form.fundname?(this.$message.error("基金名称不能为空"),!1):"2"!=this.form.searchType||""!=this.form.link.trim()&&""!=this.form.searchName.trim()||(this.$message.error("词条或链接不能为空"),!1)},updateFunds:function(){var e=this,t={page:1,rows:9999,type:"",module:"",msg:""};this.loading=!0,this.$http.get(i.a.getFundList+"?"+a.i(o.c)(t)).then(function(t){console.log(t),e.funds=t.results,e.loading=!1}).catch(function(t){console.log(t),e.loading=!1,e.$message.error("获取基金列表数据失败！")})},handleSearch:function(){this.results=this.querySearchAsync(this.keyword)},querySearchAsync:function(e){for(var t=this.funds,a=e?t.filter(this.createStateFilter(e)):t,n=0;n<t.length;n++)t[n].value=t[n].fundname;return a},createStateFilter:function(e){return function(t){if(isNaN(e)){return t.fundname.toLowerCase().indexOf(e.toLowerCase())>=0}return(t.fundcode+"").indexOf(e.toLowerCase())>=0}},handleSelect:function(e,t){console.log(e),this.keyword=e.value,""==e.value?(this.form.fundname="",this.form.fundcode=""):(this.form.fundcode=e.fundcode,this.form.fundname=e.fundname)},handleClose:function(){console.log("handleClose",this.edit,this.form),this.form=s()({},this.edit),this.keyword="",this.$emit("close")},handleIconClick:function(){console.log("click")}}}},jcIM:function(e,t,a){var n=a("JYzL");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("8bSs")("4eeec3ea",n,!0)},"x2/H":function(e,t,a){"use strict";var n=a("EVCB"),s=a("I732"),o=a("CjZ7");t.a={name:"",components:{SearchEdit:n.a},data:function(){return{editVisible:!1,editData:{},loading:!1,search:[]}},created:function(){this.updateList()},methods:{searchAdd:function(){console.log("searchAdd"),this.editData={fundcode:"",fundname:"",link:"",searchName:"",searchType:"1"},this.editVisible=!0},searchEdit:function(e,t){console.log("edit"),this.editData=t,this.editVisible=!0},updateList:function(){var e=this;this.loading=!0,this.$http.get(o.a.getSearchList).then(function(t){a.i(s.a)(t,"","数据获取失败")&&(e.search=t.results||[]),e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error("获取数据失败")})},searchDel:function(e,t){var n=this;console.log("del");var i={sid:t.sid};a.i(s.b)({},function(){n.$http.delete(o.a.deleteSearch+"?"+a.i(s.c)(i)).then(function(e){a.i(s.a)(e,"删除成功","删除失败")&&n.updateList()}).catch(function(e){n.$message.success("删除失败")})})},addSearch:function(e){var t=this;console.log(e,"333");var n={};1==e.searchType&&(n={fundcode:e.fundcode,fundname:e.fundname,link:"",searchName:"",searchType:e.searchType}),2==e.searchType&&(n={fundcode:"",fundname:"",link:e.link,searchName:e.searchName,searchType:e.searchType}),e.sid?this.$http.put(o.a.updateSearch,n).then(function(e){a.i(s.a)(e,"更新成功","更新失败")&&(t.updateList(),t.closeEdit())}).catch(function(e){console.log(e),t.$message.error("更新失败")}):this.$http.post(o.a.addSearch,n).then(function(e){a.i(s.a)(e,"添加成功","添加失败")&&(t.updateList(),t.closeEdit())}).catch(function(e){console.log(e),t.$message.error("添加失败")})},closeEdit:function(){this.editVisible=!1}}}}});
//# sourceMappingURL=8.9a92077d76dadabc52f5.js.map