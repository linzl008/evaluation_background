webpackJsonp([5],{"+1Zo":function(e,t,i){t=e.exports=i("BkJT")(!0),t.push([e.i,"img[data-v-4472329e]{max-height:200px;max-width:200px}","",{version:3,sources:["C:/Users/kivlin/Desktop/final_exam/evaluation_web/src/pages/board/imageUpload-edit.vue"],names:[],mappings:"AACA,qBACE,iBAAkB,AAClB,eAAiB,CAClB",file:"imageUpload-edit.vue",sourcesContent:["\nimg[data-v-4472329e] {\n  max-height: 200px;\n  max-width: 200px;\n}\n"],sourceRoot:""}])},"+VYt":function(e,t,i){var a=i("+1Zo");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("8bSs")("60e35792",a,!0)},"0U8v":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"imageUpload-edit",attrs:{visible:e.visible,"before-close":e.handleClose,title:"现有图片"},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form}},[i("el-form-item",{attrs:{label:""}},[i("el-form-item",{attrs:{label:"图片：","label-width":e.formLabelWidth,prop:"name"}},[i("el-upload",{attrs:{action:"",multiple:!1,"file-list":e.fileList,"http-request":e.falseAjax,"before-upload":e.beforeAvatarUpload,"list-type":"picture","on-change":e.changeImg}},[i("el-button",{attrs:{size:"mini",type:"primary"}},[i("i",{staticClass:"el-icon-plus"}),e._v(" 上传新的图片")]),e._v(" "),i("div",{staticClass:"el-upload__tip",staticStyle:{"line-height":"16px","margin-top":"0","margin-bottom":"7px",color:"gray"},attrs:{slot:"tip"},slot:"tip"},[i("span",[e._v("图片尺寸推荐：750px*188px")]),i("br"),i("span",[e._v("图片格式说明：jpg、png")])])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"跳转链接：","label-width":e.formLabelWidth,prop:"name"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入跳转链接","auto-complete":"off"},model:{value:e.form.imglink,callback:function(t){e.$set(e.form,"imglink",t)},expression:"form.imglink"}})],1),e._v(" "),i("el-dialog",{attrs:{size:"tiny"},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},n=[],o={render:a,staticRenderFns:n};t.a=o},"5uIz":function(e,t,i){"use strict";function a(e){i("inP2")}Object.defineProperty(t,"__esModule",{value:!0});var n=i("gfU7"),o=i("Ni1y"),l=i("8AGX"),s=a,r=l(n.a,o.a,!1,s,"data-v-abd27de0",null);t.default=r.exports},B9Rm:function(e,t,i){t=e.exports=i("BkJT")(!0),t.push([e.i,".banner[data-v-abd27de0]{text-align:left}.banner .add[data-v-abd27de0]{padding-left:15px;padding-right:15px}.banner img[data-v-abd27de0]{max-width:200px;max-height:200px;height:auto;overflow:hidden}","",{version:3,sources:["C:/Users/kivlin/Desktop/final_exam/evaluation_web/src/pages/board/banner.vue"],names:[],mappings:"AACA,yBACE,eAAiB,CAClB,AACD,8BACI,kBAAmB,AACnB,kBAAoB,CACvB,AACD,6BACI,gBAAiB,AACjB,iBAAkB,AAClB,YAAa,AAKb,eAAiB,CACpB",file:"banner.vue",sourcesContent:["\n.banner[data-v-abd27de0] {\n  text-align: left;\n}\n.banner .add[data-v-abd27de0] {\n    padding-left: 15px;\n    padding-right: 15px;\n}\n.banner img[data-v-abd27de0] {\n    max-width: 200px;\n    max-height: 200px;\n    height: auto;\n    /*zoom:expression( function(e) {*/\n    /*if(e.width>e.height) {if (e.width>200) { e.height = e.height*(200 /e.width); e.width=200; }}*/\n    /*else {if (e.height>200) { e.width = e.width*(200 /e.height); e.height=200; }}*/\n    /*e.style.zoom = '1';     }(this));*/\n    overflow: hidden;\n}\n"],sourceRoot:""}])},FKMz:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var a="/huataipic"},Ni1y:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"banner"},[i("el-tabs",{model:{value:e.activeTabsName,callback:function(t){e.activeTabsName=t},expression:"activeTabsName"}},[i("el-tab-pane",{attrs:{label:"首页banner",name:"first"}},[i("el-button",{staticClass:"add",attrs:{size:"mini",type:"primary"},on:{click:e.homeBannerAdd}},[e._v("新增")]),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],staticClass:"table",attrs:{border:"",data:e.homeBanner,"element-loading-text":"拼命加载中"}},[i("el-table-column",{attrs:{label:"序号",prop:"imgid",width:"70",align:"center"}}),e._v(" "),i("el-table-column",{staticStyle:{"overflow-y":"hidden"},attrs:{label:"预览图",width:"236",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("img",{attrs:{src:e.debugHead+t.row.imgurl}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"链接",prop:"imglink",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"位置调整",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.homeBannerMove(t.$index,t.row,"top")}}},[e._v("置顶")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.homeBannerMove(t.$index,t.row,"up")}}},[e._v("上移")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.homeBannerMove(t.$index,t.row,"down")}}},[e._v("下移")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.homeBannerMove(t.$index,t.row,"bottom")}}},[e._v("置底")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作",prop:"title",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.homeBannerEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){e.homeBannerDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),i("el-tab-pane",{attrs:{label:"标签页banner",name:"second"}},[i("el-button",{staticClass:"add",attrs:{type:"primary",size:"mini"},on:{click:e.tabBannerAdd}},[e._v("新增")]),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],staticClass:"table",attrs:{border:"",data:e.tabBanner,"element-loading-text":"拼命加载中"}},[i("el-table-column",{attrs:{label:"序号",prop:"imgid",width:"70",align:"center"}}),e._v(" "),i("el-table-column",{staticStyle:{"overflow-y":"hidden"},attrs:{label:"预览图",width:"236",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("img",{attrs:{src:e.debugHead+t.row.imgurl}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"链接",prop:"imglink",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",prop:"title",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.tabBannerEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){e.tabBannerDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1),e._v(" "),i("imageUpload-edit",{attrs:{edit:e.editData,type:e.type,visible:e.editVisible},on:{upadteOrAdd:e.upadteOrAdd,close:e.closeEdit}})],1)},n=[],o={render:a,staticRenderFns:n};t.a=o},aTJb:function(e,t,i){"use strict";var a=i("aA9S"),n=i.n(a),o=i("FKMz");t.a={name:"",props:{visible:Boolean,edit:Object,type:String},watch:{edit:function(e){console.log("newVal",e),this.form=n()({},e),this.fileList=[],this.uploadFile={}}},created:function(){this.debugHead=o.a},data:function(){return{debugHead:"",fileList:[],dialogImageUrl:"",dialogVisible:!1,formLabelWidth:"120px",form:{},uploadFile:{}}},methods:{submit:function(){console.log("submit",this.edit,this.form),this.$emit("upadteOrAdd",{data:this.form,file:this.uploadFile})},reset:function(){console.log("reset"),this.$message.success("重置成功"),this.form=n()({},this.edit),this.fileList=[],this.uploadFile={}},handleClose:function(){console.log("handleClose",this.edit,this.form),this.form=n()({},this.edit),this.fileList=[],this.uploadFile={},this.$emit("close")},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},getTime:function(e,t){this.form[t]=e},beforeAvatarUpload:function(e){this.uploadFile=e,console.log(e,this.fileList);var t="image/jpeg"===e.type||"image/png"===e.type;return t||this.$message.error("上传文件类型错误"),t},changeImg:function(e,t){console.log("gggg:",e,t),t.length>1&&t.shift()},falseAjax:function(){console.log("falseUpload")}}}},ds08:function(e,t,i){"use strict";function a(e){i("+VYt")}var n=i("aTJb"),o=i("0U8v"),l=i("8AGX"),s=a,r=l(n.a,o.a,!1,s,"data-v-4472329e",null);t.a=r.exports},gfU7:function(e,t,i){"use strict";var a=i("ds08"),n=i("FKMz"),o=i("I732"),l=i("CjZ7");t.a={name:"",components:{ImageUploadEdit:a.a},created:function(){console.log("created"),this.debugHead=n.a,console.log(this.debugHead),this.updateList(1),this.updateList(2)},data:function(){return{type:"",debugHead:"",editVisible:!1,editData:{},loading1:!0,loading2:!0,activeTabsName:"first",homeBanner:[],tabBanner:[]}},methods:{homeBannerAdd:function(){this.editData={uploadfile:"",bannername:"",imglink:"",bannertype:"1"},this.type="home",this.editVisible=!0},homeBannerMove:function(e,t,a){var n=this,s=this.checkActiveName(),r={sortflag1:t.sortflag,sortflag2:t.sortflag,bannertype:t.bannertype};r.sortflag1=Number(r.sortflag1);var d=Number(this.homeBanner[this.homeBanner.length-1].sortflag);if("top"==a){if(r.sortflag1<=1)return;r.sortflag2=1}if("up"==a){if(r.sortflag1<=1)return;r.sortflag2=r.sortflag1-1}if("down"==a){if(r.sortflag1>=d)return;r.sortflag2=r.sortflag1+1}if("bottom"==a){if(r.sortflag1>=d)return;r.sortflag2=d}console.log("home move:",t,r),this.$http.get(l.a.moveBannerList+"?"+i.i(o.c)(r)).then(function(e){i.i(o.a)(e,"移动成功","移动失败")&&n.updateList(s)}).catch(function(e){n.$message.error("移动失败")})},homeBannerEdit:function(e,t){console.log("edit"),this.editData=t,this.type="home",this.editVisible=!0},homeBannerDel:function(e,t){var a=this;console.log("del",t);var n={imgid:t.imgid,bannertype:t.bannertype},s=this.checkActiveName();i.i(o.b)({title:"确定删除该广告图？"},function(){a.$http.delete(l.a.deleteBannerList+"?"+i.i(o.c)(n)).then(function(e){i.i(o.a)(e,"删除成功","删除失败")&&a.updateList(s)}).catch(function(e){a.$message.error("删除失败!")})})},tabBannerAdd:function(){this.editData={uploadfile:"",bannername:"",imglink:"",bannertype:"2"},this.type="tab",this.editVisible=!0},tabBannerEdit:function(e,t){console.log("edit"),this.editData=t,this.type="tab",this.editVisible=!0},tabBannerDel:function(e,t){var a=this;console.log("tabBannerDel",t);var n={imgid:t.imgid,bannertype:t.bannertype},s=this.checkActiveName();i.i(o.b)({title:"确定删除该广告图？"},function(){a.$http.delete(l.a.deleteBannerList+"?"+i.i(o.c)(n)).then(function(e){i.i(o.a)(e,"删除成功","删除失败")&&a.updateList(s)}).catch(function(e){a.$message.error("删除失败!")})})},updateList:function(e){var t=this,a={bannertype:e};"1"==e&&(this.loading1=!0,this.$http.get(l.a.getBannerList+"?"+i.i(o.c)(a)).then(function(e){i.i(o.a)(e,"","查询失败")&&(t.homeBanner=e.rows),t.loading1=!1})),"2"==e&&(this.loading2=!0,this.$http.get(l.a.getBannerList+"?"+i.i(o.c)(a)).then(function(e){i.i(o.a)(e,"","查询失败")&&(t.tabBanner=e.rows),t.loading2=!1}))},upadteOrAdd:function(e){var t=this;console.log(e);var a=new FormData;a.append("imglink",e.data.imglink),a.append("bannertype",e.data.bannertype),e.data.imgid?(e.file.uid&&a.append("uploadfile",e.file),a.append("imgid",e.data.imgid),this.$http.post(l.a.updateBannerList,a).then(function(a){i.i(o.a)(a,"更新成功","更新失败")&&(t.updateList(e.data.bannertype),t.closeEdit())}).catch(function(e){t.$message.error("更新失败")})):(a.append("uploadfile",e.file),this.$http.post(l.a.addBannerList,a).then(function(a){i.i(o.a)(a,"添加成功","添加失败")&&(t.updateList(e.data.bannertype),t.closeEdit())}).catch(function(e){t.$message.error("添加失败")}))},closeEdit:function(){this.editVisible=!1},checkActiveName:function(){return"first"==this.activeTabsName?1:"second"==this.activeTabsName?2:void 0}}}},inP2:function(e,t,i){var a=i("B9Rm");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("8bSs")("62e48f00",a,!0)}});
//# sourceMappingURL=5.74ea700af3be93806236.js.map