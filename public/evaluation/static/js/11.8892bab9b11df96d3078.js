webpackJsonp([11],{"5ora":function(e,t,a){"use strict";var n=a("aA9S"),i=a.n(n),o=a("I732"),l=a("CjZ7");t.a={name:"",props:{visible:Boolean,type:String,edit:Object,selectedFunds:Array},watch:{keyword:function(e){this.handleSearch()},edit:function(e){console.log("newVal",e),this.form=i()({},e),this.keyword=this.form.fundname||this.form.fundcode,this.checkFundList(),this.handleSearch(this.keyword)}},data:function(){return{keyword:"",funds:[],timeout:null,form:{},results:[],options:[{value:"单位净值"},{value:"累计净值"},{value:"万份收益"},{value:"七日年化"},{value:"最近一日"},{value:"最近一周"},{value:"最近一月"},{value:"最近三月"},{value:"最近六月"},{value:"最近一年"},{value:"今年以来"},{value:"成立以来"}]}},mounted:function(){this.updateFunds()},methods:{updateFunds:function(){var e=this,t={page:1,rows:9999,type:"",module:"",msg:""};this.$http.get(l.a.getPageFunds+"?"+a.i(o.c)(t)).then(function(t){console.log(t),e.funds=t.results,e.checkFundList()}).catch(function(t){console.log(t),e.$message.error("获取基金列表数据失败！")})},checkFundList:function(){for(var e=0;e<this.funds.length;e++)this.funds[e].selected=!1;for(var t=0;t<this.selectedFunds.length;t++)for(var e=0;e<this.funds.length;e++)this.funds[e].fundcode==this.selectedFunds[t].fundcode&&(this.funds[e].selected=!0,this.funds[e]=i()({},this.funds[e]))},handleSearch:function(){this.results=this.querySearchAsync(this.keyword)},querySearchAsync:function(e){for(var t=this.funds,a=e?t.filter(this.createStateFilter(e)):t,n=0;n<t.length;n++)t[n].value=t[n].fundname;return a},createStateFilter:function(e){return function(t){if(isNaN(e)){return t.fundname.toLowerCase().indexOf(e.toLowerCase())>=0}return(t.fundcode+"").indexOf(e.toLowerCase())>=0}},handleSelect:function(e,t){console.log(e),this.keyword=e.value,""==e.value?(this.form.fundid="",this.form.fundcode="",this.form.fundname="",this.form.updatetime="",this.form.ratetype=""):(this.form.fundid=e.fundid,this.form.fundcode=e.fundcode,this.form.fundname=e.fundname,this.form.updatetime=e.updatetime,this.form.ratetype=e.ratetype),console.log("f",this.form),this.submit()},submit:function(){var e=this;this.form.fundcode?a.i(o.b)({title:"确定添加该基金产品？",confirm_btn:"添加"},function(){console.log("submit",e.type,e.edit,e.form),e.$emit("add",e.form)}):this.$message.info("请选择好基金再添加！")},handleClose:function(){console.log("handleClose",this.edit,this.form),this.form=i()({},this.edit),this.keyword="",this.$emit("close")},handleIconClick:function(){console.log("click")}}}},"B/e/":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"fundAdd-edit",attrs:{visible:e.visible,"before-close":e.handleClose,title:"基金添加"},on:{"update:visible":function(t){e.visible=t}}},[a("el-input",{attrs:{placeholder:"搜索基金",size:"small"},on:{change:e.handleSearch},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},on:{click:e.handleSearch},slot:"suffix"})]),e._v(" "),a("div",{staticClass:"noline"}),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.results,height:"350"}},[a("el-table-column",{attrs:{prop:"fundcode",label:"基金代码",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fundname",label:"基金名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updatetime",label:"更新时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ratetype",label:"展示数据",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:t.row.ratetype,callback:function(a){e.$set(t.row,"ratetype",a)},expression:"scope.row.ratetype"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",disabled:t.row.selected},on:{click:function(a){e.handleSelect(t.row,t.$index)}}},[e._v("添加\n          ")])]}}])})],1)],1)},i=[],o={render:n,staticRenderFns:i};t.a=o},IKgN:function(e,t,a){"use strict";function n(e){a("YQDm")}var i=a("5ora"),o=a("B/e/"),l=a("8AGX"),s=n,r=l(i.a,o.a,!1,s,"data-v-3e6a5132",null);t.a=r.exports},JzEG:function(e,t,a){"use strict";var n=a("I732"),i=a("CjZ7"),o=a("IKgN");t.a={name:"",components:{fundAddEdit:o.a},data:function(){return{editVisible:!1,tabName:"popular",loading:!1,activeMainName:"popular",type:1,module:4,editData:{},mainPopular:[]}},created:function(){this.updateList()},methods:{handleTabClick:function(){this.tabName!==this.activeMainName&&this.$router.push({path:"/home/main/"+this.activeMainName})},mainPopularAdd:function(){console.log("mainPopularAdd"),this.editData={fundname:"",fundcode:"",ratetype:"",updatetime:""},this.editVisible=!0},updateList:function(){var e=this,t={page:1,rows:9999,type:this.type,module:this.module};this.loading=!0,this.$http.get(i.a.getPageFundList+"?"+a.i(n.c)(t)).then(function(t){if(a.i(n.a)(t,"","数据获取失败")){e.mainPopular=t.results||[];for(var i=0;i<e.mainPopular.length;i++)e.mainPopular[i].ratetype=a.i(n.e)(e.mainPopular[i].ratetype)}e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error("获取数据失败")})},mainPopularMove:function(e,t,o){var l=this,s={sortflag1:t.sortflag,sortflag2:t.sortflag,type:this.type,module:this.module};s.sortflag1=Number(s.sortflag1);var r=Number(this.mainPopular[this.mainPopular.length-1].sortflag);if("top"==o){if(s.sortflag1<=1)return;s.sortflag2=1}if("up"==o){if(s.sortflag1<=1)return;s.sortflag2=s.sortflag1-1}if("down"==o){if(s.sortflag1>=r)return;s.sortflag2=s.sortflag1+1}this.$http.get(i.a.movePageFundList+"?"+a.i(n.c)(s)).then(function(e){a.i(n.a)(e,"移动数据成功","移动数据失败")&&l.updateList()}).catch(function(e){l.$message.error("移动失败")})},mainPopularDel:function(e,t){var o=this;console.log("del");var l={type:this.type,module:this.module,fundcode:t.fundcode};a.i(n.b)({},function(){o.$http.delete(i.a.deletePageFundList+"?"+a.i(n.c)(l)).then(function(e){a.i(n.a)(e,"删除成功","删除失败")&&o.updateList()}).catch(function(e){o.$message.success("删除失败")})})},addFund:function(e){var t=this,o={ratetype:a.i(n.f)(e.ratetype),fundcode:e.fundcode,type:this.type,module:this.module};this.$http.post(i.a.addPageFundList,o).then(function(e){a.i(n.a)(e,"添加成功","添加失败")&&(t.updateList(),t.closeEdit())}).catch(function(e){console.log("添加失败")})},closeEdit:function(){this.editVisible=!1}}}},YQDm:function(e,t,a){var n=a("nZvJ");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("8bSs")("fefae600",n,!0)},nZvJ:function(e,t,a){t=e.exports=a("BkJT")(!0),t.push([e.i,".el-table td[data-v-3e6a5132],.el-table th[data-v-3e6a5132]{padding:6px 0}","",{version:3,sources:["C:/Users/kivlin/Desktop/final_exam/evaluation_web/src/pages/main/fundAdd-edit.vue"],names:[],mappings:"AACA,4DACE,aAAe,CAChB",file:"fundAdd-edit.vue",sourcesContent:["\n.el-table td[data-v-3e6a5132], .el-table th[data-v-3e6a5132] {\n  padding: 6px 0;\n}\n"],sourceRoot:""}])},o9q8:function(e,t,a){"use strict";function n(e){a("ym9x")}Object.defineProperty(t,"__esModule",{value:!0});var i=a("JzEG"),o=a("uslp"),l=a("8AGX"),s=n,r=l(i.a,o.a,!1,s,"data-v-41a85fa8",null);t.default=r.exports},pNZd:function(e,t,a){t=e.exports=a("BkJT")(!0),t.push([e.i,".popular[data-v-41a85fa8]{text-align:left}","",{version:3,sources:["C:/Users/kivlin/Desktop/final_exam/evaluation_web/src/pages/main/popular.vue"],names:[],mappings:"AACA,0BACE,eAAiB,CAClB",file:"popular.vue",sourcesContent:["\n.popular[data-v-41a85fa8] {\n  text-align: left;\n}\n"],sourceRoot:""}])},uslp:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"popular"},[a("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeMainName,callback:function(t){e.activeMainName=t},expression:"activeMainName"}},[a("el-tab-pane",{attrs:{label:"热门产品",name:"production"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"指数宝",name:"index"}},[e._v("指数宝")]),e._v(" "),a("el-tab-pane",{attrs:{label:"基金精选",name:"select"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"人气之选",name:"popular"}},[a("el-button",{staticClass:"add",attrs:{type:"primary",size:"mini"},on:{click:e.mainPopularAdd}},[e._v("新增")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",attrs:{border:"",data:e.mainPopular,"element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{label:"序号",prop:"sortflag",width:"70",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"基金代码",prop:"fundcode",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"基金名称",prop:"fundname",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"数据名称",prop:"ratetype",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.mainPopularDel(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.mainPopularMove(t.$index,t.row,"top")}}},[e._v("置顶")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.mainPopularMove(t.$index,t.row,"up")}}},[e._v("上移")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.mainPopularMove(t.$index,t.row,"down")}}},[e._v("下移")])]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"热门关注",name:"hot"}})],1),e._v(" "),a("fundAdd-edit",{attrs:{type:e.tabName,selectedFunds:e.mainPopular,edit:e.editData,visible:e.editVisible},on:{close:e.closeEdit,add:e.addFund}})],1)},i=[],o={render:n,staticRenderFns:i};t.a=o},ym9x:function(e,t,a){var n=a("pNZd");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("8bSs")("2dca42c4",n,!0)}});
//# sourceMappingURL=11.8892bab9b11df96d3078.js.map