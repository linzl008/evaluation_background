webpackJsonp([13],{"5ora":function(t,e,n){"use strict";var a=n("aA9S"),i=n.n(a),o=n("I732"),s=n("CjZ7");e.a={name:"",props:{visible:Boolean,type:String,edit:Object,selectedFunds:Array},watch:{keyword:function(t){this.handleSearch()},edit:function(t){console.log("newVal",t),this.form=i()({},t),this.keyword=this.form.fundname||this.form.fundcode,this.checkFundList(),this.handleSearch(this.keyword)}},data:function(){return{keyword:"",funds:[],timeout:null,form:{},results:[],options:[{value:"单位净值"},{value:"累计净值"},{value:"万份收益"},{value:"七日年化"},{value:"最近一日"},{value:"最近一周"},{value:"最近一月"},{value:"最近三月"},{value:"最近六月"},{value:"最近一年"},{value:"今年以来"},{value:"成立以来"}]}},mounted:function(){this.updateFunds()},methods:{updateFunds:function(){var t=this,e={page:1,rows:9999,type:"",module:"",msg:""};this.$http.get(s.a.getPageFunds+"?"+n.i(o.c)(e)).then(function(e){console.log(e),t.funds=e.results,t.checkFundList()}).catch(function(e){console.log(e),t.$message.error("获取基金列表数据失败！")})},checkFundList:function(){for(var t=0;t<this.funds.length;t++)this.funds[t].selected=!1;for(var e=0;e<this.selectedFunds.length;e++)for(var t=0;t<this.funds.length;t++)this.funds[t].fundcode==this.selectedFunds[e].fundcode&&(this.funds[t].selected=!0,this.funds[t]=i()({},this.funds[t]))},handleSearch:function(){this.results=this.querySearchAsync(this.keyword)},querySearchAsync:function(t){for(var e=this.funds,n=t?e.filter(this.createStateFilter(t)):e,a=0;a<e.length;a++)e[a].value=e[a].fundname;return n},createStateFilter:function(t){return function(e){if(isNaN(t)){return e.fundname.toLowerCase().indexOf(t.toLowerCase())>=0}return(e.fundcode+"").indexOf(t.toLowerCase())>=0}},handleSelect:function(t,e){console.log(t),this.keyword=t.value,""==t.value?(this.form.fundid="",this.form.fundcode="",this.form.fundname="",this.form.updatetime="",this.form.ratetype=""):(this.form.fundid=t.fundid,this.form.fundcode=t.fundcode,this.form.fundname=t.fundname,this.form.updatetime=t.updatetime,this.form.ratetype=t.ratetype),console.log("f",this.form),this.submit()},submit:function(){var t=this;this.form.fundcode?n.i(o.b)({title:"确定添加该基金产品？",confirm_btn:"添加"},function(){console.log("submit",t.type,t.edit,t.form),t.$emit("add",t.form)}):this.$message.info("请选择好基金再添加！")},handleClose:function(){console.log("handleClose",this.edit,this.form),this.form=i()({},this.edit),this.keyword="",this.$emit("close")},handleIconClick:function(){console.log("click")}}}},AvyA:function(t,e,n){var a=n("tCP/");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("8bSs")("01085c86",a,!0)},"B/e/":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"fundAdd-edit",attrs:{visible:t.visible,"before-close":t.handleClose,title:"基金添加"},on:{"update:visible":function(e){t.visible=e}}},[n("el-input",{attrs:{placeholder:"搜索基金",size:"small"},on:{change:t.handleSearch},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[n("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},on:{click:t.handleSearch},slot:"suffix"})]),t._v(" "),n("div",{staticClass:"noline"}),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.results,height:"350"}},[n("el-table-column",{attrs:{prop:"fundcode",label:"基金代码",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"fundname",label:"基金名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"updatetime",label:"更新时间"}}),t._v(" "),n("el-table-column",{attrs:{prop:"ratetype",label:"展示数据",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.row.ratetype,callback:function(n){t.$set(e.row,"ratetype",n)},expression:"scope.row.ratetype"}},t._l(t.options,function(t){return n("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})}))]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",disabled:e.row.selected},on:{click:function(n){t.handleSelect(e.row,e.$index)}}},[t._v("添加\n          ")])]}}])})],1)],1)},i=[],o={render:a,staticRenderFns:i};e.a=o},IKgN:function(t,e,n){"use strict";function a(t){n("YQDm")}var i=n("5ora"),o=n("B/e/"),s=n("8AGX"),l=a,r=s(i.a,o.a,!1,l,"data-v-3e6a5132",null);e.a=r.exports},IlRc:function(t,e,n){"use strict";function a(t){n("AvyA")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("Jo+1"),o=n("zskk"),s=n("8AGX"),l=a,r=s(i.a,o.a,!1,l,"data-v-6d8fe02a",null);e.default=r.exports},"Jo+1":function(t,e,n){"use strict";var a=n("a3Yh"),i=n.n(a),o=n("IKgN"),s=n("I732"),l=n("CjZ7");e.a={name:"",components:{fundAddEdit:o.a},data:function(){return{editVisible:!1,tabName:"hot",loading:!1,activeMainName:"hot",type:1,module:5,editData:{},mainHot:[]}},created:function(){this.updateList()},methods:{handleTabClick:function(){this.tabName!==this.activeMainName&&this.$router.push({path:"/home/main/"+this.activeMainName})},mainHotAdd:function(){console.log("mainHotAdd"),this.editData={fundname:"",fundcode:"",ratetype:"",updatetime:""},this.editVisible=!0},updateList:function(){var t=this,e={page:1,rows:9999,type:this.type,module:this.module};this.loading=!0,this.$http.get(l.a.getPageFundList+"?"+n.i(s.c)(e)).then(function(e){if(n.i(s.a)(e,"","数据获取失败")){t.mainHot=e.results||[];for(var a=0;a<t.mainHot.length;a++)t.mainHot[a].ratetype=n.i(s.e)(t.mainHot[a].ratetype)}t.loading=!1}).catch(function(e){t.loading=!1,t.$message.error("获取数据失败")})},mainHotMove:function(t,e,a){var i=this,o={sortflag1:e.sortflag,sortflag2:e.sortflag,type:this.type,module:this.module};o.sortflag1=Number(o.sortflag1);var r=Number(this.mainHot[this.mainHot.length-1].sortflag);if("top"==a){if(o.sortflag1<=1)return;o.sortflag2=1}if("up"==a){if(o.sortflag1<=1)return;o.sortflag2=o.sortflag1-1}if("down"==a){if(o.sortflag1>=r)return;o.sortflag2=o.sortflag1+1}this.$http.get(l.a.movePageFundList+"?"+n.i(s.c)(o)).then(function(t){n.i(s.a)(t,"移动数据成功","移动数据失败")&&i.updateList()}).catch(function(t){i.$message.error("移动失败")})},mainHotDel:function(t,e){var a=this;console.log("del");var o=i()({module:this.module,fundcode:e.fundcode},"fundcode",e.fundcode);n.i(s.b)({},function(){a.$http.delete(l.a.deletePageFundList+"?"+n.i(s.c)(o)).then(function(t){n.i(s.a)(t,"删除成功","删除失败")&&a.updateList()}).catch(function(t){a.$message.success("删除失败")})})},addFund:function(t){var e=this,a={ratetype:n.i(s.f)(t.ratetype),fundcode:t.fundcode,type:this.type,module:this.module};this.$http.post(l.a.addPageFundList,a).then(function(t){n.i(s.a)(t,"添加成功","添加失败")&&(e.updateList(),e.closeEdit())}).catch(function(t){console.log("添加失败")})},closeEdit:function(){this.editVisible=!1}}}},YQDm:function(t,e,n){var a=n("nZvJ");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("8bSs")("fefae600",a,!0)},nZvJ:function(t,e,n){e=t.exports=n("BkJT")(!0),e.push([t.i,".el-table td[data-v-3e6a5132],.el-table th[data-v-3e6a5132]{padding:6px 0}","",{version:3,sources:["C:/Users/kivlin/Desktop/final_exam/evaluation_web/src/pages/main/fundAdd-edit.vue"],names:[],mappings:"AACA,4DACE,aAAe,CAChB",file:"fundAdd-edit.vue",sourcesContent:["\n.el-table td[data-v-3e6a5132], .el-table th[data-v-3e6a5132] {\n  padding: 6px 0;\n}\n"],sourceRoot:""}])},"tCP/":function(t,e,n){e=t.exports=n("BkJT")(!0),e.push([t.i,".hot[data-v-6d8fe02a]{text-align:left}","",{version:3,sources:["C:/Users/kivlin/Desktop/final_exam/evaluation_web/src/pages/main/hot.vue"],names:[],mappings:"AACA,sBACE,eAAiB,CAClB",file:"hot.vue",sourcesContent:["\n.hot[data-v-6d8fe02a] {\n  text-align: left;\n}\n"],sourceRoot:""}])},zskk:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hot"},[n("el-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.activeMainName,callback:function(e){t.activeMainName=e},expression:"activeMainName"}},[n("el-tab-pane",{attrs:{label:"热门产品",name:"production"}}),t._v(" "),n("el-tab-pane",{attrs:{label:"指数宝",name:"index"}},[t._v("指数宝")]),t._v(" "),n("el-tab-pane",{attrs:{label:"基金精选",name:"select"}},[t._v("基金精选")]),t._v(" "),n("el-tab-pane",{attrs:{label:"人气之选",name:"popular"}},[t._v("人气之选")]),t._v(" "),n("el-tab-pane",{attrs:{label:"热门关注",name:"hot"}},[n("el-button",{staticClass:"add",attrs:{type:"primary",size:"mini"},on:{click:t.mainHotAdd}},[t._v("新增")]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table",attrs:{border:"",data:t.mainHot,"element-loading-text":"拼命加载中"}},[n("el-table-column",{attrs:{label:"序号",prop:"sortflag",width:"70",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"基金代码",prop:"fundcode",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"基金名称",prop:"fundname",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"数据名称",prop:"ratetype",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",prop:"title",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){t.mainHotDel(e.$index,e.row)}}},[t._v("删除")]),t._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(n){t.mainHotMove(e.$index,e.row,"top")}}},[t._v("置顶")]),t._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(n){t.mainHotMove(e.$index,e.row,"up")}}},[t._v("上移")]),t._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(n){t.mainHotMove(e.$index,e.row,"down")}}},[t._v("下移")])]}}])})],1)],1)],1),t._v(" "),n("fundAdd-edit",{attrs:{type:t.tabName,selectedFunds:t.mainHot,edit:t.editData,visible:t.editVisible},on:{close:t.closeEdit,add:t.addFund}})],1)},i=[],o={render:a,staticRenderFns:i};e.a=o}});
//# sourceMappingURL=13.4b3594626698b36f2265.js.map