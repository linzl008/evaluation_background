webpackJsonp([15],{"+E+j":function(e,t,i){var a=i("6wOi");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("8bSs")("7611cfd6",a,!0)},"6wOi":function(e,t,i){t=e.exports=i("BkJT")(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"marquee-edit.vue",sourceRoot:""}])},BJx5:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"news-edit",attrs:{visible:e.visible,"before-close":e.handleClose,title:"资讯编辑"},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form}},[i("el-form-item",{attrs:{label:"基金名称：","label-width":e.formLabelWidth}},[i("el-input",{attrs:{placeholder:"请输入基金名称",size:"small","auto-complete":"off"},on:{change:e.handleSearch},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"","label-width":e.formLabelWidth}},[i("el-table",{staticStyle:{width:"100%","line-height":"25px"},attrs:{data:e.results,"max-height":"250"}},[i("el-table-column",{attrs:{prop:"fundcode",label:"基金代码",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"fundname",label:"基金名称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.handleSelect(t.row,t.$index)}}},[e._v("添加\n            ")])]}}])})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"发布时间：","label-width":e.formLabelWidth,prop:"sendTimeType disable"}},[i("el-radio-group",{staticStyle:{"padding-top":"12px"},on:{change:function(t){e.toggle("start")}},model:{value:e.form.startTimeType,callback:function(t){e.$set(e.form,"startTimeType",t)},expression:"form.startTimeType"}},[i("el-radio",{attrs:{label:"0"}},[e._v("点击发布")]),e._v(" "),i("div",{staticClass:"m-t"},[i("el-radio",{staticStyle:{"padding-right":"10px"},attrs:{label:"1"}},[e._v("定时发布")]),e._v(" "),i("el-date-picker",{staticClass:"inline",attrs:{type:"datetime",size:"mini",placeholder:"选择日期",editable:!1,format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",disabled:e.form.startTimeState},on:{change:function(t){return e.getTime(t,"pushtime")}},model:{value:e.form.pushtime,callback:function(t){e.$set(e.form,"pushtime",t)},expression:"form.pushtime"}})],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"下架时间：","label-width":e.formLabelWidth}},[i("el-radio-group",{staticStyle:{"padding-top":"12px"},on:{change:function(t){e.toggle("end")}},model:{value:e.form.endTimeType,callback:function(t){e.$set(e.form,"endTimeType",t)},expression:"form.endTimeType"}},[i("el-radio",{attrs:{label:"0"}},[e._v("点击下架")]),e._v(" "),i("div",{staticClass:"m-t"},[i("el-radio",{staticStyle:{"padding-right":"10px"},attrs:{label:"1"}},[e._v("定时下架")]),e._v(" "),i("el-date-picker",{staticClass:"inline",attrs:{type:"datetime",size:"mini",placeholder:"选择日期",editable:!1,format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",disabled:e.form.endTimeState},on:{change:function(t){return e.getTime(t,"endtime")}},model:{value:e.form.endtime,callback:function(t){e.$set(e.form,"endtime",t)},expression:"form.endtime"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},n=[],s={render:a,staticRenderFns:n};t.a=s},QV9S:function(e,t,i){var a=i("luN8");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("8bSs")("766ab37d",a,!0)},Vtu4:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"marquee"},[i("el-button",{staticClass:"add",attrs:{type:"primary",size:"mini"},on:{click:e.marqueeAdd}},[e._v("发布新基金消息")]),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",attrs:{border:"",data:e.marquee,"element-loading-text":"拼命加载中"}},[i("el-table-column",{attrs:{label:"跑马灯滚动消息序号",prop:"id",width:"180",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"基金名称",prop:"fundname",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"发布时间",prop:"pushtime",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"下架时间",prop:"endtime",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"消息状态",prop:"msgstatus",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.msgstatus?i("div",[e._v("已下架")]):e._e(),e._v(" "),"1"==t.row.msgstatus?i("div",[e._v("展示中")]):e._e(),e._v(" "),"2"==t.row.msgstatus?i("div",[e._v("等待展示")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.marqueeEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){e.marqueeDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("div",{staticClass:"block",staticStyle:{"text-align":"right"}},[i("el-pagination",{attrs:{"current-page":e.pageInfo.pageNum,"page-sizes":e.pageInfo.pageSizes,"page-size":e.pageInfo.pageSize,total:e.pageInfo.totalPage,layout:"total, sizes,jumper ,prev, pager, next "},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),i("marquee-edit",{attrs:{edit:e.editData,visible:e.editVisible},on:{updateOrAdd:e.updateOrAdd,close:e.closeEdit}})],1)},n=[],s={render:a,staticRenderFns:n};t.a=s},XTLP:function(e,t,i){"use strict";function a(e){i("+E+j")}var n=i("YuDN"),s=i("BJx5"),o=i("8AGX"),r=a,l=o(n.a,s.a,!1,r,"data-v-0ffb3601",null);t.a=l.exports},YuDN:function(e,t,i){"use strict";var a=i("aA9S"),n=i.n(a),s=i("I732"),o=i("CjZ7");t.a={name:"",props:{visible:Boolean,edit:Object},watch:{edit:function(e){this.form=n()({},this.form,e),this.keyword=this.form.fundname||this.form.fundcode,this.handleSearch(this.keyword),this.edit.pushtime?this.form.startTimeType="1":this.form.startTimeType="0",this.edit.endtime?this.form.endTimeType="1":this.form.endTimeType="0",0==this.form.startTimeType&&(this.form.startTimeState=!0),0==this.form.endTimeType&&(this.form.endTimeState=!0),console.log("newVal",this.form)},keyword:function(e){this.handleSearch(e)},visible:function(e){1==e&&(this.keyword=this.form.fundname||this.form.fundcode||"",this.handleSearch(this.keyword))}},data:function(){return{formLabelWidth:"120px",keyword:"",results:[],form:{startTimeType:"1",endTimeType:"1",startTimeState:!1,endTimeState:!1}}},mounted:function(){var e=this,t={page:1,rows:9999,msg:""};this.$http.get(o.a.getFundList+"?"+i.i(s.c)(t)).then(function(t){i.i(s.a)(t,"","获取基金列表失败")&&(e.funds=t.results)}).catch(function(t){e.$message.error("获取基金列表数据失败！")})},methods:{handleSearch:function(){this.results=this.querySearchAsync(this.keyword)},submit:function(){var e=this;this.checkList()&&(console.log("submit",this.edit,this.form),i.i(s.b)({title:"确定发布该基金？",confirm_btn:"发布"},function(){e.$emit("updateOrAdd",e.form),e.keyword=""}))},checkList:function(){if(""==this.form.fundcode)return this.$message.error("基金不能为空"),!1;if("1"===this.form.startTimeType&&""==this.form.pushtime||"1"===this.form.endTimeType&&""==this.form.endtime)return this.$message.error("请选择时间"),!1;if("1"===this.form.startTimeType)var e=new Date(this.form.pushtime).getTime();else var e=Date.now();var t=new Date(this.form.endtime).getTime();return!("1"===this.form.endTimeType&&e>t)||(this.$message.error("结束时间必须晚于发布时间"),!1)},handleClose:function(){console.log("handleClose",this.edit,this.form);var e={startTimeType:"1",endTimeType:"1",startTimeState:!1,endTimeState:!1};this.keyword="",this.form={},this.form=n()({},e,this.edit),this.$emit("close")},getTime:function(e,t){console.log("data"),this.form[t]=e},querySearchAsync:function(e){for(var t=this.funds,i=e?t.filter(this.createStateFilter(e)):t,a=0;a<t.length;a++)t[a].value=t[a].fundname;return i},createStateFilter:function(e){return function(t){if(isNaN(e)){return(t.fundname.toLowerCase()+"").indexOf(e.toLowerCase())>=0}return(t.fundcode+"").indexOf(e.toLowerCase())>=0}},handleSelect:function(e,t){console.log("item",e),""==e.value?(this.form.fundid="",this.form.fundcode="",this.form.fundname=""):(this.form.fundid=e.fundid,this.form.fundcode=e.fundcode,this.form.fundname=e.fundname),this.keyword=this.form.fundname},toggle:function(e){"start"==e&&("0"==this.form.startTimeType?this.form.startTimeState=!0:this.form.startTimeState=!1),"end"==e&&("0"==this.form.endTimeType?this.form.endTimeState=!0:this.form.endTimeState=!1)}}}},iACj:function(e,t,i){"use strict";function a(e){i("QV9S")}Object.defineProperty(t,"__esModule",{value:!0});var n=i("m4LC"),s=i("Vtu4"),o=i("8AGX"),r=a,l=o(n.a,s.a,!1,r,"data-v-6fd54870",null);t.default=l.exports},luN8:function(e,t,i){t=e.exports=i("BkJT")(!0),t.push([e.i,".marquee[data-v-6fd54870]{text-align:left}.marquee .add[data-v-6fd54870]{padding-left:15px;padding-right:15px}","",{version:3,sources:["C:/Users/kivlin/Desktop/final_exam/evaluation_web/src/pages/board/marquee.vue"],names:[],mappings:"AACA,0BACE,eAAiB,CAClB,AACD,+BACI,kBAAmB,AACnB,kBAAoB,CACvB",file:"marquee.vue",sourcesContent:["\n.marquee[data-v-6fd54870] {\n  text-align: left;\n}\n.marquee .add[data-v-6fd54870] {\n    padding-left: 15px;\n    padding-right: 15px;\n}\n"],sourceRoot:""}])},m4LC:function(e,t,i){"use strict";var a=i("XTLP"),n=i("I732"),s=i("CjZ7");t.a={name:"",components:{MarqueeEdit:a.a},data:function(){return{funds:[],loading:!1,notifytype:1,timeout:null,editVisible:!1,editData:{},marquee:[],pageInfo:{pageNum:1,pageSize:10,totalPage:10,pageSizes:[10,20,50,100]}}},created:function(){this.updateMarquee()},methods:{marqueeAdd:function(){this.editData={fundcode:"",fundname:"",fundid:"",pushtime:"",endtime:""},this.editVisible=!0},marqueeEdit:function(e,t){console.log("edit",t),this.editData=t,this.editVisible=!0},marqueeDel:function(e,t){var a=this;console.log("del",t),i.i(n.b)({title:"确定删除该基金？",confirm_btn:"删除"},function(){var e={id:t.id};a.$http.delete(s.a.deleteNewsMarFundList+"?"+i.i(n.c)(e)).then(function(e){i.i(n.a)(e,"删除成功","删除失败")&&(a.updateMarquee(),a.closeEdit())}).catch(function(e){a.$message.success("删除失败!")})})},updateOrAdd:function(e){var t=this;console.log(e);var a={fundcode:e.fundcode,pushtime:e.pushtime,endtime:e.endtime,notifytype:this.notifytype};"0"==e.startTimeType&&(a.pushtime=""),"0"==e.endTimeType&&(a.endtime=""),e.id?(a.id=e.id,this.$http.put(s.a.updateNewsMarFundList,a).then(function(e){i.i(n.a)(e,"更新成功","更新失败")&&(t.updateMarquee(),t.closeEdit())}).catch(function(e){t.$message.error("更新失败")})):this.$http.post(s.a.addNewsMarFundList,a).then(function(e){i.i(n.a)(e,"添加成功","添加失败")&&(t.updateMarquee(),t.closeEdit())}).catch(function(e){t.$message.error("添加失败")})},handleSizeChange:function(e){this.pageInfo.pageSize=e,console.log("handleSizeChange",e,this.pageInfo),this.updateMarquee()},handleCurrentChange:function(e){this.pageInfo.pageNum=e,console.log("handleCurrentChange",e,this.pageInfo),this.updateMarquee()},updateMarquee:function(){var e=this;console.log("updateMarquee");var t={page:this.pageInfo.pageNum,rows:this.pageInfo.pageSize,notifytype:this.notifytype};this.loading=!0,this.$http.get(s.a.getNewsMarFundList+"?"+i.i(n.c)(t)).then(function(t){console.log(t),i.i(n.a)(t,"","查询失败")&&(e.marquee=t.results,e.pageInfo.totalPage=t.total),e.loading=!1}).catch(function(t){e.$message.error("获取数据失败，请刷新重试！"),e.loading=!1})},closeEdit:function(){this.editVisible=!1}}}}});
//# sourceMappingURL=15.80d083326e87edd03a8d.js.map