webpackJsonp([9],{"5ora":function(e,t,n){"use strict";var a=n("aA9S"),i=n.n(a),l=n("I732"),s=n("CjZ7");t.a={name:"",props:{visible:Boolean,type:String,edit:Object,selectedFunds:Array},watch:{keyword:function(e){this.handleSearch()},edit:function(e){console.log("newVal",e),this.form=i()({},e),this.keyword=this.form.fundname||this.form.fundcode,this.checkFundList(),this.handleSearch(this.keyword)}},data:function(){return{keyword:"",funds:[],timeout:null,form:{},results:[],options:[{value:"单位净值"},{value:"累计净值"},{value:"万份收益"},{value:"七日年化"},{value:"最近一日"},{value:"最近一周"},{value:"最近一月"},{value:"最近三月"},{value:"最近六月"},{value:"最近一年"},{value:"今年以来"},{value:"成立以来"}]}},mounted:function(){this.updateFunds()},methods:{updateFunds:function(){var e=this,t={page:1,rows:9999,type:"",module:"",msg:""};this.$http.get(s.a.getPageFunds+"?"+n.i(l.c)(t)).then(function(t){console.log(t),e.funds=t.results,e.checkFundList()}).catch(function(t){console.log(t),e.$message.error("获取基金列表数据失败！")})},checkFundList:function(){for(var e=0;e<this.funds.length;e++)this.funds[e].selected=!1;for(var t=0;t<this.selectedFunds.length;t++)for(var e=0;e<this.funds.length;e++)this.funds[e].fundcode==this.selectedFunds[t].fundcode&&(this.funds[e].selected=!0,this.funds[e]=i()({},this.funds[e]))},handleSearch:function(){this.results=this.querySearchAsync(this.keyword)},querySearchAsync:function(e){for(var t=this.funds,n=e?t.filter(this.createStateFilter(e)):t,a=0;a<t.length;a++)t[a].value=t[a].fundname;return n},createStateFilter:function(e){return function(t){if(isNaN(e)){return t.fundname.toLowerCase().indexOf(e.toLowerCase())>=0}return(t.fundcode+"").indexOf(e.toLowerCase())>=0}},handleSelect:function(e,t){console.log(e),this.keyword=e.value,""==e.value?(this.form.fundid="",this.form.fundcode="",this.form.fundname="",this.form.updatetime="",this.form.ratetype=""):(this.form.fundid=e.fundid,this.form.fundcode=e.fundcode,this.form.fundname=e.fundname,this.form.updatetime=e.updatetime,this.form.ratetype=e.ratetype),console.log("f",this.form),this.submit()},submit:function(){var e=this;this.form.fundcode?n.i(l.b)({title:"确定添加该基金产品？",confirm_btn:"添加"},function(){console.log("submit",e.type,e.edit,e.form),e.$emit("add",e.form)}):this.$message.info("请选择好基金再添加！")},handleClose:function(){console.log("handleClose",this.edit,this.form),this.form=i()({},this.edit),this.keyword="",this.$emit("close")},handleIconClick:function(){console.log("click")}}}},"8OaW":function(e,t,n){"use strict";function a(e){n("oKJO")}Object.defineProperty(t,"__esModule",{value:!0});var i=n("B7k0"),l=n("vblk"),s=n("8AGX"),o=a,r=s(i.a,l.a,!1,o,"data-v-750b0619",null);t.default=r.exports},"B/e/":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"fundAdd-edit",attrs:{visible:e.visible,"before-close":e.handleClose,title:"基金添加"},on:{"update:visible":function(t){e.visible=t}}},[n("el-input",{attrs:{placeholder:"搜索基金",size:"small"},on:{change:e.handleSearch},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[n("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},on:{click:e.handleSearch},slot:"suffix"})]),e._v(" "),n("div",{staticClass:"noline"}),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.results,height:"350"}},[n("el-table-column",{attrs:{prop:"fundcode",label:"基金代码",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"fundname",label:"基金名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"updatetime",label:"更新时间"}}),e._v(" "),n("el-table-column",{attrs:{prop:"ratetype",label:"展示数据",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:t.row.ratetype,callback:function(n){e.$set(t.row,"ratetype",n)},expression:"scope.row.ratetype"}},e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",disabled:t.row.selected},on:{click:function(n){e.handleSelect(t.row,t.$index)}}},[e._v("添加\n          ")])]}}])})],1)],1)},i=[],l={render:a,staticRenderFns:i};t.a=l},B7k0:function(e,t,n){"use strict";var a=n("IKgN"),i=n("I732"),l=n("CjZ7");t.a={name:"",components:{fundAddEdit:a.a},data:function(){return{editVisible:!1,tabName:"select",loading:!1,activeMainName:"select",type:1,module:3,editData:{},mainSelect:[]}},created:function(){this.updateList()},methods:{handleTabClick:function(){this.tabName!==this.activeMainName&&this.$router.push({path:"/home/main/"+this.activeMainName})},mainSelectAdd:function(){console.log("mainSelectAdd"),this.editData={fundname:"",fundcode:"",ratetype:"",updatetime:""},this.editVisible=!0},updateList:function(){var e=this,t={page:1,rows:9999,type:this.type,module:this.module};this.loading=!0,this.$http.get(l.a.getPageFundList+"?"+n.i(i.c)(t)).then(function(t){if(n.i(i.a)(t,"","数据获取失败")){e.mainSelect=t.results||[];for(var a=0;a<e.mainSelect.length;a++)e.mainSelect[a].ratetype=n.i(i.e)(e.mainSelect[a].ratetype)}e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error("获取数据失败")})},mainSelectMove:function(e,t,a){var s=this,o={sortflag1:t.sortflag,sortflag2:t.sortflag,type:this.type,module:this.module};o.sortflag1=Number(o.sortflag1);var r=Number(this.mainSelect[this.mainSelect.length-1].sortflag);if("top"==a){if(o.sortflag1<=1)return;o.sortflag2=1}if("up"==a){if(o.sortflag1<=1)return;o.sortflag2=o.sortflag1-1}if("down"==a){if(o.sortflag1>=r)return;o.sortflag2=o.sortflag1+1}this.$http.get(l.a.movePageFundList+"?"+n.i(i.c)(o)).then(function(e){n.i(i.a)(e,"移动数据成功","移动数据成功")&&s.updateList()}).catch(function(e){s.$message.error("移动失败")})},mainSelectDel:function(e,t){var a=this;console.log("del");var s={type:this.type,module:this.module,fundcode:t.fundcode};n.i(i.b)({},function(){a.$http.delete(l.a.deletePageFundList+"?"+n.i(i.c)(s)).then(function(e){n.i(i.a)(e,"删除成功","删除失败")&&a.updateList()}).catch(function(e){a.$message.success("删除失败")})})},addFund:function(e){var t=this,a={ratetype:n.i(i.f)(e.ratetype),fundcode:e.fundcode,type:this.type,module:this.module};this.$http.post(l.a.addPageFundList,a).then(function(e){n.i(i.a)(e,"添加成功","添加失败")&&(t.updateList(),t.closeEdit())}).catch(function(e){console.log("添加失败")})},closeEdit:function(){this.editVisible=!1}}}},IKgN:function(e,t,n){"use strict";function a(e){n("YQDm")}var i=n("5ora"),l=n("B/e/"),s=n("8AGX"),o=a,r=s(i.a,l.a,!1,o,"data-v-3e6a5132",null);t.a=r.exports},NYGO:function(e,t,n){t=e.exports=n("BkJT")(!0),t.push([e.i,".select[data-v-750b0619]{text-align:left}","",{version:3,sources:["C:/Users/kivlin/Desktop/final_exam/evaluation_web/src/pages/main/select.vue"],names:[],mappings:"AACA,yBACE,eAAiB,CAClB",file:"select.vue",sourcesContent:["\n.select[data-v-750b0619] {\n  text-align: left;\n}\n"],sourceRoot:""}])},YQDm:function(e,t,n){var a=n("nZvJ");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("8bSs")("fefae600",a,!0)},nZvJ:function(e,t,n){t=e.exports=n("BkJT")(!0),t.push([e.i,".el-table td[data-v-3e6a5132],.el-table th[data-v-3e6a5132]{padding:6px 0}","",{version:3,sources:["C:/Users/kivlin/Desktop/final_exam/evaluation_web/src/pages/main/fundAdd-edit.vue"],names:[],mappings:"AACA,4DACE,aAAe,CAChB",file:"fundAdd-edit.vue",sourcesContent:["\n.el-table td[data-v-3e6a5132], .el-table th[data-v-3e6a5132] {\n  padding: 6px 0;\n}\n"],sourceRoot:""}])},oKJO:function(e,t,n){var a=n("NYGO");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("8bSs")("9d9b29b4",a,!0)},vblk:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"select"},[n("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeMainName,callback:function(t){e.activeMainName=t},expression:"activeMainName"}},[n("el-tab-pane",{attrs:{label:"热门产品",name:"production"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"指数宝",name:"index"}},[e._v("指数宝")]),e._v(" "),n("el-tab-pane",{attrs:{label:"基金精选",name:"select"}},[n("el-button",{staticClass:"add",attrs:{type:"primary",size:"mini"},on:{click:e.mainSelectAdd}},[e._v("新增")]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",attrs:{border:"",data:e.mainSelect,"element-loading-text":"拼命加载中"}},[n("el-table-column",{attrs:{label:"序号",prop:"sortflag",width:"70",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"基金代码",prop:"fundcode",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"基金名称",prop:"fundname",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"数据名称",prop:"ratetype",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",prop:"title",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){e.mainSelectDel(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.mainSelectMove(t.$index,t.row,"top")}}},[e._v("置顶")]),e._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.mainSelectMove(t.$index,t.row,"up")}}},[e._v("上移")]),e._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.mainSelectMove(t.$index,t.row,"down")}}},[e._v("下移")])]}}])})],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"人气之选",name:"popular"}},[e._v("人气之选")]),e._v(" "),n("el-tab-pane",{attrs:{label:"热门关注",name:"hot"}})],1),e._v(" "),n("fundAdd-edit",{attrs:{type:e.tabName,selectedFunds:e.mainSelect,edit:e.editData,visible:e.editVisible},on:{close:e.closeEdit,add:e.addFund}})],1)},i=[],l={render:a,staticRenderFns:i};t.a=l}});
//# sourceMappingURL=9.e666dbc1c364ac0d2d24.js.map